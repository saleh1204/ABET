<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content=""> 
        <script src="js/vendor/jquery-1.11.2.js"></script>
        <script src="js/vendor/jquery.js"></script>

        <!-- DataTables Responsive CSS -->

        <link rel="stylesheet" type="text/css" href="css/font-awesome.min.css" />

        <script src="js/vendor/jquery.dataTables.min.js"></script>         
        <script src="js/vendor/bootstrap.min.js"></script>
        <script src="js/main.js"></script>
        <title>Coordinator</title>

        <link rel="stylesheet" href="css/jquery.dataTables.min.css">
        <link rel="stylesheet" href="css/Select.css">

        <link rel="stylesheet" type="text/css" href="css/font-awesome.min.css" />


        <link href="css/bootstrap.css" rel="stylesheet">
        <!-- Custom styles for this template -->
        <link href="css/dashboard.css" rel="stylesheet">
        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    </head>
    <body>
        <nav class="navbar navbar-inverse navbar-fixed-top">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="index.html">Abet Report Generator</a>
                </div>
                <div id="navbar" class="navbar-collapse collapse">

                    <form class="navbar-form navbar-right">
                        <input type="text" class="form-control" placeholder="Search...">
                    </form>
                </div>
            </div>
        </nav>
        <div class="container-fluid">
            <div class="row">
                <div class="col-sm-3 col-md-2 sidebar">
                    <ul class="nav nav-sidebar">
                        <li class="active">
                            <a id="RCoptions" data-toggle="collapse" data-target="#ReportCenter" ><span class="glyphicon glyphicon-collapse-down"></span> Report Center</a>
                        </li>
                        <li  >

                            <div class="container">

                                <div id="ReportCenter" class="collapse">
                                    <ul class="nav nav-sidebar"> <li >
                                            <a href="index.html">      - Exit Survey</a>
                                        </li>
                                        <li  >
                                            <a href="employerSurvey.html">      - Employer Survey</a>
                                        </li>
                                        <li class="active">
                                            <a href="CLOSurvey.html">      - CLO Survey</a>
                                        </li>
                                        <li>
                                            <a href=" rubricsSurvey.html">      - Rubrics Survey </a>
                                        </li>    </ul> </div>
                            </div> 
                        </li>
                        <li>
                            <a href="PO.html">Program Outcomes</a>
                        </li>
                        <li>
                            <a href="changePO.html">Change Program Outcomes</a>
                        </li>
                        <li>
                            <a href="employeSurvey.html">Employe Survey</a>
                        </li>
                        <li>
                            <a href="exitSurvey.html">Exit Survey</a>
                        </li>

                    </ul>
                </div>
                <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
                    <h1 class="page-header">Report Center</h1>
                    <div class="row placeholders">
                    </div>
                    <h2 class="sub-header">CLO Survey</h2>
                    <!-- Modal -->
                    <div class="modal fade" id="myModal" tabindex="-1" role="dialog">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-body">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                        <h4 class="modal-title">Add Student</h4>
                                    </div>
                                    <div class="col-md-4">
                                        <form role="form"> 
                                            <div class="form-group"> 
                                                <label class="control-label" for="exampleInputEmail1">ID</label>                                                 
                                                <input type="number" class="form-control" id="studentID" placeholder="Enter Student Id"> 
                                            </div>
                                            <div class="form-group"> 
                                                <label class="control-label" for="exampleInputEmail1">Name</label>                                                 
                                                <input type="text" class="form-control" id="studentName" placeholder="Enter Student Name"> 
                                            </div>
                                            <div class="form-group"> 
                                                <label class="control-label" for="exampleInputEmail1">Email address</label>                                                 
                                                <input type="email" class="form-control" id="exampleInputEmail1" placeholder="Enter email"> 
                                            </div>
                                            <div class="form-group"> 
                                                <label class="control-label" for="exampleInputEmail1">Major</label>                                                 
                                                <input type="text" class="form-control" id="majorID" placeholder="Enter Student Major"> 
                                            </div>                                             
                                            <button type="submit" class="btn">Submit</button>                                             
                                        </form>                                         
                                    </div>
                                    <div class="modal-footer">
                                    </div>
                                </div>
                            </div>
                            <!-- /.modal-content -->
                        </div>
                        <!-- /.modal-dialog -->
                    </div>                     
                    <nav class="navbar navbar-inverse navbar-fixed-top">
                        <div class="container">
                            <div class="navbar-header">
                                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                                    <span class="sr-only">Toggle navigation</span>
                                    <span class="icon-bar"></span>
                                    <span class="icon-bar"></span>
                                    <span class="icon-bar"></span>
                                </button>
                                <a class="navbar-brand" href="index.html">Abet Report Generator</a>
                            </div>
                            <div id="navbar" class="navbar-collapse collapse" aria-expanded="false" style="height: 1px;">

                            </div>
                            <!--/.nav-collapse -->
                        </div>
                    </nav>


                    <link rel="stylesheet" type="text/css" href="http://www.shieldui.com/shared/components/latest/css/light/all.min.css" />
                    <script type="text/javascript" src="http://www.shieldui.com/shared/components/latest/js/shieldui-all.min.js"></script>


                    <script type="text/javascript">


                        $(document).ready(function () {



                            // get terms 
                            var parameters = {
                                grp: "Coordinator",
                                cmd: "getTerms"

                            };
                            $.getJSON("../index.php", parameters).done(function (data, textStatus, jqXHR) {
                                var terms = [];
                                for (var i = 0; i < data.length; i++)
                                {
                                    terms[i] = data[i].semester;
                                }

                                creatSelectOptions("#chooseT", terms);
                            }
                            ).fail(function (jqXHR, textStatus, errorThrown)
                            {// log error to browser's console
                                console.log(textStatus + "\n" + errorThrown.toString());
                            });

                            function creatSelectOptions(id, data)
                            {  //not sure if it will work or it neads .each
                                $(id).html("");//clear the defualt value
                                for (var i = 0; i < data.length; i++) {
                                    $(id).append("<option value='" + data[i] + "'>" + data[i] + "</option>");
                                }
                            }




                            //create table is in the submit function 






                            function creatReport(SOCode, HPerformace)
                            {
                                $("#report").html("<div class='row'><div class='col-lg-12 col-md-12 '><div class='panel panel-info'><div class='panel-heading'><h3>Quarterly Sales</h3></div><div class='panel-body'><div id='performance2' style='height: 270px;'></div></div></div></div></div>");

                                $("#performance2").shieldChart({
                                    primaryHeader: {
                                        text: "Visitors"
                                    },
                                    axisX: {
                                        collectionAlias: "StudentOutcome",
                                        categoricalValues: SOCode},
                                    dataSeries: [{
                                            seriesType: "bar",
                                            collectionAlias: "HPerformace",
                                            data: HPerformace
                                        }]
                                });
                            }



                            $('form').submit(function (event) {
                                event.preventDefault();

                                var courses = [];
                                var table = [];


                                var parameters = {//for the courses
                                    grp: "Coordinator",
                                    cmd: "getCourses",
                                    Term: $("#chooseT option:selected").val() //expected an array of courseCode
                                };
                                $.getJSON("../index.php", parameters).done(function (data, textStatus, jqXHR) {

                                    for (var i = 0; i < data.length; i++)//1d array Courses
                                    {
                                        courses[i] = data[i].courseCode;
                                    }

                                }
                                ).fail(function (jqXHR, textStatus, errorThrown)
                                {// log error to browser's console
                                    console.log(textStatus + "\n" + errorThrown.toString());
                                });//*****end creat Courses


                                var i;
                                for (i = 0; i < courses.length; i++) {//to initiat and create dataTable and Titles for each Course
                                    var datatable = [];
                                    var titles = [];
                                    $("#table" + i + "").html("<div class='panel panel-default'><div class='panel-heading'>" + courses[i] + "Survey Summery <bold/></div> <div class='panel-body'><div class='dataTable_wrapper'><table class='table table-striped table-bordered table-hover' id='dataTables-example" + i + "'>/table></div></div></div><hr id='table" + (i + 1) + "' />");

                                    var parameters = {//for the tables
                                        grp: "Coordinator",
                                        cmd: "getCLOSurvey",
                                        courseCode: courses[i] //expected an array of #,Question,4,3,2,1,0, average
                                    };
                                    $.getJSON("../index.php", parameters).done(function (data, textStatus, jqXHR) {

                                        for (var j = 0; j < data.length; j++)//2d array
                                        {
                                            datatable[j] = [];
                                        }
                                        for (var x = 0; x < data.length; x++)//fill 2d array
                                        {
                                            datatable[x][0] = data[x].Sr;
                                            datatable[x][1] = data[x].Question;
                                            datatable[x][2] = data[x].Exellent;
                                            datatable[x][3] = data[x].Vgood;
                                            datatable[x][4] = data[x].Good;
                                            datatable[x][5] = data[x].Fair;
                                            datatable[x][6] = data[x].Poor;
                                            datatable[x][7] = data[x].ave;

                                        }

                                        titles[0] = {title: "Sr"};
                                        titles[1] = {title: "Question"};
                                        titles[2] = {title: "4"};
                                        titles[3] = {title: "3"};
                                        titles[4] = {title: "2"};
                                        titles[5] = {title: "1"};
                                        titles[6] = {title: "0"};
                                        titles[7] = {title: "ave"};

                                        table[i] = $("#dataTables-example" + i + "").DataTable({
                                            data: datatable,
                                            columns: titles

                                        }); //end of ajax

                                    }
                                    ).fail(function (jqXHR, textStatus, errorThrown)
                                    {// log error to browser's console
                                        console.log(textStatus + "\n" + errorThrown.toString());
                                    });//*****end created one Table
                                }//*****end of for loop to creat all Tables
                                $("#table" + i + "").append("<hr id='report'/>");


                                var parameters = {//for the chart figure
                                    grp: "Coordinator",
                                    cmd: "getChartData"//not sure of the command

                                            //expected an array of SOCode,highestmarks
                                };
                                $.getJSON("../index.php", parameters).done(function (data, textStatus, jqXHR) {
                                    var SOCode = [];
                                    var highestmarks = [];//not sure of this

                                    for (var i = 0; i < data.length; i++)//fill 2d array
                                    {
                                        SOCode[i] = data[i].SOCode;
                                        highestmarks[i] = data[i].highestmarks;

                                    }
                                    creatReport(SOCode, highestmarks);


                                }
                                ).fail(function (jqXHR, textStatus, errorThrown)
                                {// log error to browser's console
                                    console.log(textStatus + "\n" + errorThrown.toString());
                                });//*****end Chart Figure




                            });
















                            $("#ReportCenter").on("hide.bs.collapse", function () {
                                $("#RCoptions").html('<span class="glyphicon glyphicon-collapse-down"></span> Report Center');
                            });
                            $("#ReportCenter").on("show.bs.collapse", function () {
                                $("#RCoptions").html('<span class="glyphicon glyphicon-collapse-up"></span> Report Center');
                            });






                        });



                    </script> 

                    <div class="col-lg-10">
                        <form class="form-inline">

                            <div class="form-group">
                                <label for="chooseT">       Choose Term   :   </label>
                                <select id="chooseT" class=" form-control">
                                    <option>132</option>
                                    <option>122</option>
                                </select>   </div>
                            <button type="submit" id="generate" class="btn btn-success">Generate Reports</button>
                        </form> 

                    </div >

                    <hr id="table0" />



                </div>
            </div>
        </div>

        <!-- Bootstrap core JavaScript
    ================================================== -->
        <!-- Placed at the end of the document so the pages load faster -->

        <!-- Metis Menu Plugin JavaScript -->

        <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    </body>
</html>
